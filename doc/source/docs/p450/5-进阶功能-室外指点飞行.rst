5-进阶功能-室外指点飞行
================================

本节主要讲解P450系列无人机在室外的指点飞行演示。视频紧接上节内容 **首次飞行**  ，默认已经通过WiFi数传连接到QGC地面站和nomachine远程连接到板载计算机，
主要分为一下几点进行讲解：摄像头标定，二维码检测确认，坐标系确认，启动指令，起飞，降落，以及最后的视频演示。

启动指令
------------

首先启动基本vio脚本 

`roslaunch p450_experiment p450_gps_onboard.launch`

然后再启动控制脚本

`roslaunch p450_experiment p450_gps_control.launch`


之后会出现终端控制界面，提示有两种控制的输入方式，第一种是通过命令输入控制方式，另外一种是通过键盘按键控制方式。


两种方式都可以控制无人机，一般在做实机实验过程中选择第一种通过命令输入控制方式；第二种键盘控制不太安全。接下来会详细讲解如何使用第一种命令输入控制方式实现指点飞行。

命令行控制终端详解
---------------------------

其中 0 表示的是 怠速；意思就是飞机会进入offboard模式，但是在该模式下，没有对飞机进行任何指令的发送。飞机也不会有任何动作。这个指令一般也可以不用。

1 表示的是 起飞；起飞点为当前点，起飞高度通过 yaml参数设置，单位是米，默认起飞高度是0.5m

2 表示的是 悬停；飞机正在飞行过程中如何接受到 2 指令，会在当前时刻进入悬停状态。

3 表示的是 降落；降落速度通过 yaml参数设置，单位是m/s ，默认降落速度为0.2m/s 。还有一个 上锁高度 到达上锁高度之后飞机会进入飞控的本身降落模式进而缓缓着地，
上锁高度通过 yaml 参数进行设置，单位是米，默认是 0.18m，即认为离地不到20cm的时候进入飞控本身的降落飞行模式。

4 表示的是 move模式；该模式就包含我们所称的指点飞行功能，在此模式下，又有5种子模式，
0对应XYZ_POS,
1对应XY_POS_Z_VEL,
2对应XY_VEL_Z_POS,
3对应XYZ_VEL,
5对应TRAJECTORY；
对应的功能为空间位置控制，
水平面位置控制高度速度控制，
水平面速度控制高度定高控制，
空间速度控制，
以及最后的轨迹跟踪控制。


常用的模式为0空间位置控制（指点飞行），接下来会讲讲实机过程中起飞的具体实现。

指点飞
-------------

选择 4 move飞行模式，然后选择 0 空间位置控制，然后选择 0 ENU_FRAME惯性坐标系，最后输入期望的状态，空间位置xyz和航向角yaw。